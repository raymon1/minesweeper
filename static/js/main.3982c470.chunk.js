(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var i=t(0),r=t(1),o=t.n(r),c=t(5),a=t.n(c),u=(t(12),t(13),t(2)),s="notStarted",l="running",d="won",f="lost",h=[{id:0,text:"Beginner",height:10,width:10,minesCount:10},{id:1,text:"Intermediate",height:16,width:16,minesCount:44},{id:2,text:"Expert",height:30,width:30,minesCount:100}];t(14);function g(e){var n=""+e.value;return Object(i.jsx)("div",{className:"digital-counter",children:n.padStart(3,"0")})}function v(e){return Object(i.jsxs)("div",{className:"scoreboard",children:[Object(i.jsx)(g,{value:e.minesLeft}),Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"select-wrap",children:Object(i.jsx)("select",{onChange:function(n){return e.levelChangeHandler(n.target.value)},value:e.level,children:h.map((function(e){return Object(i.jsxs)("option",{value:e.id,children:[" ",e.text," "]},e.id)}))})}),Object(i.jsx)(b,{status:e.gameStatus,onClickHandler:e.resetHandler,isClicking:e.isClicking})]}),Object(i.jsx)(g,{value:e.timer})]})}function b(e){return Object(i.jsx)("button",{className:"reset",onClick:e.onClickHandler,children:e.isClicking?"\ud83d\ude32":(n=e.status,n===f?"\ud83d\ude1e":n===d?"\ud83d\ude0e":"\ud83d\ude0a")});var n}t(15),t(16);var j=t(3),m=t(6),C=function e(n){var t=this;Object(m.a)(this,e),this.onTouchStart=function(e){t.contextMenuPossible=!0,t.longPressCountdown=setTimeout((function(){t.contextMenuPossible=!1,t.callback(e)}),610)},this.onTouchMove=function(e){clearTimeout(t.longPressCountdown)},this.onTouchCancel=function(e){t.contextMenuPossible=!1,clearTimeout(t.longPressCountdown)},this.onTouchEnd=function(e){t.contextMenuPossible=!1,clearTimeout(t.longPressCountdown)},this.onContextMenu=function(e){t.contextMenuPossible=!1,clearTimeout(t.longPressCountdown),t.callback(e),e.preventDefault()},this.callback=n,this.longPressCountdown=null,this.contextMenuPossible=!1};function O(e){var n=e.data.isCovered?"cell":"uncovered-cell",t=e.data.isCovered||e.isMine?"":"cell-".concat(e.data.neighboringMines),r=!e.data.isCovered&&e.isMine?"cell-mine":"",o=e.data.isCovered?e.data.flagged?"\ud83d\udea9":"":e.data.isMine?"\ud83d\udca3":e.data.neighboringMines>0?e.data.neighboringMines:"",c=e.data.clickedMine?"clicked-mine":"",a=new C((function(n){n.preventDefault(),e.handleRightClick(e.data,n)}));return Object(i.jsx)("button",{className:"".concat(n," ").concat(t," ").concat(r," ").concat(c),onClick:function(){return e.handleLeftClick(e.data)},onContextMenu:a.onContextMenu,onTouchStart:a.onTouchStart,onTouchCancel:a.onTouchCancel,onTouchEnd:a.onTouchEnd,onTouchMove:a.onTouchMove,children:o})}function M(e){var n=Object(r.useState)(e.grid),t=Object(u.a)(n,2),o=t[0],c=t[1],a=Object(r.useState)(e.refresh),s=Object(u.a)(a,2),l=s[0],h=s[1];function g(n,t){t.preventDefault(),e.cellGotClicked();var i=[n.x,n.y],r=i[0],a=i[1];if(o[r][a].isCovered&&!e.gameOver){var u=o.map((function(e){return e.map((function(e){return Object(j.a)({},e)}))}));u[r][a].flagged=!u[r][a].flagged,v(u)&&e.setGameEnd(d),c(u),e.cellGotFlagged(u[r][a].flagged)}}l!==e.refresh&&(h(e.refresh),c(e.grid));var v=function(e){return e.reduce((function(e,n){return e&&n.reduce((function(e,n){return e&&(n.isMine||!n.isCovered)}),!0)}),!0)};function b(n){var t=[n.x,n.y],i=t[0],r=t[1];if(e.cellGotClicked(),o[i][r].isCovered&&!o[i][r].flagged&&!e.gameOver)if(o[i][r].isMine){var a=o.map((function(e){return e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{isCovered:!e.isMine&&e.isCovered})}))}));a[i][r].clickedMine=!0,c(a),e.setGameEnd(f)}else{var s=o.map((function(e){return e.map((function(e){return Object(j.a)({},e)}))}));if(s[i][r].isCovered=!1,0===o[i][r].neighboringMines?function(e,n){var t=[[n.x,n.y]],i=0,r=e.length,o=e[0].length;for(;t.length>0;){for(var a=t.length,s=0;s<a;s++)for(var l=t.shift(),d=Object(u.a)(l,2),f=d[0],h=d[1],g=Math.max(0,f-1);g<Math.min(r,f+2);++g)for(var v=Math.max(0,h-1);v<Math.min(o,h+2);++v)e[g][v].isMine||!e[g][v].isCovered||e[g][v].flagged||(e[g][v].isCovered=!1,0===e[g][v].neighboringMines&&t.push([g,v]));setTimeout((function(e){c(e)}),50*i++,e)}}(s,n):c(s),v(s)){var l=s.map((function(e){return e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{flagged:e.isMine})}))}));c(l),e.setGameEnd(d)}}}return o.map((function(e,n){return Object(i.jsx)("div",{className:"row",children:e.map((function(e,n){return Object(i.jsx)(O,{data:e,handleLeftClick:b,handleRightClick:g},n)}))},n)}))}function x(e,n,t){return function(e){function n(n,t){for(var i=0,r=Math.max(0,n-1);r<Math.min(e.length,n+2);++r)for(var o=Math.max(0,t-1);o<Math.min(e[r].length,t+2);++o)e[r][o].isMine&&i++;return i}for(var t=0;t<e.length;++t)for(var i=0;i<e[t].length;++i)e[t][i].neighboringMines=n(t,i);return e}(function(e){for(var n=e.length,t=e[0].length,i=0;i<n;++i)for(var r=0;r<t;++r){var o=Math.floor(Math.random()*n*t),c=Math.floor(o/t),a=o%t,u=[e[c][a],e[i][r]];e[i][r]=u[0],e[c][a]=u[1]}return e}(function(e,n){for(var t=0;t<e.length&&n;++t)for(var i=0;i<e[t].length&&n;++i,--n)e[t][i]={isMine:!0};return e}(function(e,n){for(var t=[],i=0;i<e;i++){t[i]=[];for(var r=0;r<n;r++)t[i][r]={isMine:!1}}return t}(e,n),t))).map((function(e,n){return e.map((function(e,t){return{isCovered:!0,isMine:e.isMine,neighboringMines:e.neighboringMines,x:n,y:t}}))}))}var p=function(){var e=Object(r.useState)(h[0]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(t.minesCount),a=Object(u.a)(c,2),g=a[0],b=a[1],j=Object(r.useState)(s),m=Object(u.a)(j,2),C=m[0],O=m[1],p=Object(r.useState)(x(t.height,t.width,t.minesCount)),k=Object(u.a)(p,2),T=k[0],w=k[1],S=Object(r.useState)(!1),P=Object(u.a)(S,2),E=P[0],G=P[1],N=Object(r.useState)(!1),L=Object(u.a)(N,2),F=L[0],H=L[1],y=function(e,n){var t=Object(r.useState)(0),i=Object(u.a)(t,2),o=i[0],c=i[1];return Object(r.useEffect)((function(){var t=null;return e&&!t?t=setTimeout((function(){c((function(e){return e+1}))}),1e3):t&&clearTimeout(t),n&&c(0),function(){return clearTimeout(t)}}),[o,e,n]),o}(C===l,C===s);function D(){O(s),b(t.minesCount),w(x(t.height,t.width,t.minesCount)),G((function(e){return!e}))}return Object(r.useEffect)(D,[t]),Object(i.jsxs)("div",{className:"minesweeper",children:[Object(i.jsx)(v,{minesLeft:g,timer:y,gameStatus:C,level:t.id,levelChangeHandler:function(e){e!==t&&o(h[e])},isClicking:F,resetHandler:D}),Object(i.jsx)("div",{className:"grid",onMouseDown:function(){return H(!0)},onMouseUp:function(){return H(!1)},onMouseLeave:function(){return H(!1)},children:Object(i.jsx)(M,{refresh:E,grid:T,gameOver:C===d||C===f,cellGotFlagged:function(e){b(e?g-1:g+1)},cellGotClicked:function(){C===s&&O(l)},setGameEnd:function(e){O(e),e===d&&b(0)}})})]})};var k=function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsx)(p,{})})},T=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,18)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,o=n.getLCP,c=n.getTTFB;t(e),i(e),r(e),o(e),c(e)}))};a.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(k,{})}),document.getElementById("root")),T(console.log)}],[[17,1,2]]]);
//# sourceMappingURL=main.3982c470.chunk.js.map